exports.id = "main";
exports.modules = {

/***/ "./src/server/server.js":
/*!******************************!*\
  !*** ./src/server/server.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var babel_polyfill__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! babel-polyfill */ \"babel-polyfill\");\n/* harmony import */ var babel_polyfill__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(babel_polyfill__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _build_contracts_FlightSuretyApp_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../build/contracts/FlightSuretyApp.json */ \"./build/contracts/FlightSuretyApp.json\");\nvar _build_contracts_FlightSuretyApp_json__WEBPACK_IMPORTED_MODULE_1___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../../build/contracts/FlightSuretyApp.json */ \"./build/contracts/FlightSuretyApp.json\", 1);\n/* harmony import */ var _config_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config.json */ \"./src/server/config.json\");\nvar _config_json__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./config.json */ \"./src/server/config.json\", 1);\n/* harmony import */ var web3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! web3 */ \"web3\");\n/* harmony import */ var web3__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(web3__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_4__);\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n\n\n\n\n // Define workspace variables\n\nvar network = \"localhost\";\nvar config = _config_json__WEBPACK_IMPORTED_MODULE_2__[network];\nvar web3 = new web3__WEBPACK_IMPORTED_MODULE_3___default.a(new web3__WEBPACK_IMPORTED_MODULE_3___default.a.providers.WebsocketProvider(config.url.replace(\"http\", \"ws\")));\nvar flightSuretyApp = new web3.eth.Contract(_build_contracts_FlightSuretyApp_json__WEBPACK_IMPORTED_MODULE_1__.abi, config.appAddress);\nvar ORACLES_COUNT = 20;\nvar FIRST_ORACLE_ADDRESS;\nvar LAST_ORACLE_ADDRESS; // This is an IIFE (Immediately invoked function expression) just to provide this `async` keyword\n\n_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n  var accounts, fee;\n  return regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return web3.eth.getAccounts();\n\n        case 2:\n          accounts = _context.sent;\n          FIRST_ORACLE_ADDRESS = 20; //accounts.length - ORACLES_COUNT -1;\n\n          LAST_ORACLE_ADDRESS = 40; //ORACLES_COUNT + FIRST_ORACLE_ADDRESS;\n\n          console.log(\"Ganache returned \".concat(accounts.length, \" accounts.\"));\n          console.log(\"Server will use only \".concat(ORACLES_COUNT, \" of these accounts for oracles.\"));\n          console.log(\"Starting from accounts[\".concat(FIRST_ORACLE_ADDRESS, \"] for the first oracle.\"));\n          console.log(\"Ending at accounts[\".concat(LAST_ORACLE_ADDRESS, \"] for the last oracle.\")); // Use `.call` to fetch the current registration fee value\n\n          _context.next = 11;\n          return flightSuretyApp.methods.REGISTRATION_FEE().call({\n            \"from\": accounts[0],\n            \"gas\": 5000000,\n            \"gasPrice\": 100000000000\n          });\n\n        case 11:\n          fee = _context.sent;\n          console.log(\"Smart Contract requires \".concat(fee, \" wei to fund oracle registration.\")); // Register all available oracles using the `accounts` array and await the process to finish\n\n          _context.next = 15;\n          return Promise.all(accounts.map(function (account) {\n            return flightSuretyApp.methods.registerOracle().send({\n              \"from\": account,\n              \"value\": fee,\n              \"gas\": 5000000,\n              \"gasPrice\": 100000000000\n            });\n          }));\n\n        case 15:\n          console.log(\"Oracles server all set-up...\\nOracles registered and assigned addresses...\");\n          console.log(\"Listening to a request event...\"); // Once all oracles are registered we can start listening to oracle requests\n\n          flightSuretyApp.events.OracleRequest({\n            \"fromBlock\": \"latest\"\n          }, function (error, event) {\n            if (error) {\n              console.log(error);\n            } else {\n              //let index = Math.floor(Math.random() * Math.floor(10));\n              // @TODO You have to assign the random status code and submit the `submitOracleResponse` within this block.\n              console.log(event);\n            }\n          });\n\n        case 18:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n}))();\n\nvar app = express__WEBPACK_IMPORTED_MODULE_4___default()();\napp.get(\"/api\", function (req, res) {\n  res.send({\n    message: \"An API for use with your Dapp!\"\n  });\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (app);\n\n//# sourceURL=webpack:///./src/server/server.js?");

/***/ })

};